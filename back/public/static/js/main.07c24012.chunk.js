(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{41:function(e,t,a){e.exports=a(74)},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),c=a.n(s),i=a(11),l=a(1),o=a(2),m=a(4),u=a(3),d=a(5),p=a(17),h=a(8),g=a(14),f=a.n(g),E=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e,a,n,r){return t.service.post("/signup",{type:e,username:a,email:n,password:r}).then((function(e){return e.data}))},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/currentUser").then((function(e){return e.data}))},this.logout=function(){return t.service.get("/logout").then((function(e){return e.data}))},this.URL="https://causa-impacto.herokuapp.com/api/auth",this.service=f.a.create({baseURL:this.URL,withCredentials:!0})},b=a(6),v=a(9),N=a(7),O=function(){function e(){Object(l.a)(this,e),this.URL="https://causa-impacto.herokuapp.com/api/search",this.service=f.a.create({baseURL:this.URL,withCredentials:!0})}return Object(o.a)(e,[{key:"getSearchResults",value:function(e){return this.service.get("/".concat(e)).then((function(e){return e.data}))}}]),e}(),y=function e(){var t=this;Object(l.a)(this,e),this.getCategories=function(){return t.service.get("/").then((function(e){return e.data}))},this.getCategoryById=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.URL="https://causa-impacto.herokuapp.com/api/category",this.service=f.a.create({baseURL:this.URL,withCredentials:!0})};function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){a.service.getSearchResults(e).then((function(e){a.setState(C({},a.state,{results:e}))})).catch((function(e){a.setState(C({},a.state,{results:!1}))}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(C({},a.state,Object(h.a)({},n,r)),(function(){return a.handleSubmit(a.state.searchTerm)}))},a.state={searchTerm:"",results:[]},a.service=new O,a.categoryService=new y,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"dropdown is-active"},r.a.createElement("div",{className:"dropdown-trigger"},r.a.createElement("input",{className:"input",type:"text",value:this.state.searchTerm,placeholder:"Buscar",name:"searchTerm",onChange:function(t){return e.handleChange(t)}})),this.state.results.length>0&&r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu"},r.a.createElement("div",{className:"dropdown-content dc-nav"},this.state.results.map((function(e,t){return r.a.createElement(b.b,{key:t,to:e.uri,className:"dropdown-item di-nav"},e.title)})))))),r.a.createElement("div",{className:"control"},r.a.createElement(b.b,{to:"#",className:"button is-info"},r.a.createElement("span",{className:"icon is-medium"},r.a.createElement(v.a,{icon:N.m,"aria-hidden":"true"}))))))}}]),t}(n.Component);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.service=new E,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?r.a.createElement("nav",{className:"navbar is-fixed-top is-light",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(b.b,{className:"navbar-item",to:"/"},r.a.createElement("img",{alt:"causa impacto logo",src:"/images/logo.png",className:"nav-logo"})),r.a.createElement(b.b,{to:"#",role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(b.b,{to:"/",className:"navbar-item"},"Inicio")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement(S,null)),r.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},r.a.createElement(b.b,{to:"#",className:"navbar-link"},r.a.createElement("figure",{className:"image is-24x24 has-margin-right"},r.a.createElement("img",{className:"is-rounded",src:this.state.loggedInUser.image?this.state.loggedInUser.image:"https://bulma.io/images/placeholders/24x24.png",alt:this.state.loggedInUser.username}))," ",this.state.loggedInUser.username),r.a.createElement("div",{className:"navbar-dropdown"},r.a.createElement(b.b,{to:"/home",className:"navbar-item"},"Home"),r.a.createElement(b.b,{to:"/profile/".concat(this.state.loggedInUser._id),className:"navbar-item"},"Mi perfil"),r.a.createElement(b.b,{to:"/update",className:"navbar-item"},"Mis datos"),r.a.createElement("hr",{className:"navbar-divider"}),r.a.createElement(b.b,{to:"#",className:"navbar-item",onClick:this.handleLogout},"Log out")))))):r.a.createElement("nav",{className:"navbar is-fixed-top is-light",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(b.b,{className:"navbar-item",to:"/"},r.a.createElement("img",{alt:"causa impacto logo",src:"/images/logo.png",className:"nav-logo"})),r.a.createElement(b.b,{to:"#",role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(b.b,{to:"/",className:"navbar-item"},"Inicio")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(b.b,{className:"button is-primary",to:"/signup"},"Signup"),r.a.createElement(b.b,{className:"button is-light",to:"/login"},"Log in"))))))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={buttonClass:"button is-link is-fullwidth is-normal"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleClass",value:function(){this.setState({buttonClass:"button is-link is-fullwidth is-normal is-loading"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("button",{className:this.state.buttonClass,onClick:function(){return e.toggleClass()},type:"submit"},this.props.children))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.type,n=a.state.username,r=a.state.email,s=a.state.password;a.service.signup(t,n,r,s).then((function(e){a.setState({type:"",username:"",email:"",password:""}),a.props.getUser(e.user),a.props.history.push("/home")})).catch((function(e){a.setState({type:t,username:n,email:r,password:s,error:!0})}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(h.a)({},n,r))},a.state={type:"donor",username:"",email:"",password:""},a.service=new E,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content align-items-center"},r.a.createElement("h1",{className:"title"},"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Tipo de usuario:"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"select is-normal",name:"type",value:this.state.type,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:"donor"},"Cuenta personal"),r.a.createElement("option",{value:"organization"},"Cuenta para organizaci\xf3n"))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Username:"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input is-normal",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"icon is-medium is-left"},r.a.createElement(v.a,{icon:N.o,"aria-hidden":"true"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Email:"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input is-normal",type:"email",name:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"icon is-medium is-left"},r.a.createElement(v.a,{icon:N.g,"aria-hidden":"true"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Password:"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input is-normal",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"icon is-medium is-left"},r.a.createElement(v.a,{icon:N.k,"aria-hidden":"true"}))),r.a.createElement("p",{className:"help"},"Debe contener al menos 8 caracteres.")),r.a.createElement(P,{children:"Sign Up"})),r.a.createElement("p",{className:"help is-danger has-icons-right"},this.state.error?"Error":""))))),r.a.createElement("div",{className:"column"}))}}]),t}(n.Component),x=Object(p.f)(k),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then((function(e){a.setState({username:t,password:n,error:!1}),a.props.getUser(e),a.props.history.push("/home")})).catch((function(e){a.setState({username:t,password:n,error:!0})}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(h.a)({},n,r))},a.state={username:"",password:""},a.service=new E,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content align-items-center"},r.a.createElement("h1",{className:"title"},"Log In"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Username:"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input is-normal",type:"text",name:"username",title:"username",placeholder:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},required:!0}),r.a.createElement("span",{className:"icon is-medium is-left"},r.a.createElement(v.a,{icon:N.o,"aria-hidden":"true"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Password:"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input is-normal",type:"password",name:"password",title:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},required:!0}),r.a.createElement("span",{className:"icon is-medium is-left"},r.a.createElement(v.a,{icon:N.k,"aria-hidden":"true"})))),r.a.createElement(P,{children:"Login"})),r.a.createElement("h3",null,this.state.error?"Error":""))))),r.a.createElement("div",{className:"column"}))}}]),t}(n.Component),I=Object(p.f)(U),T=a(22),L=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h2",{className:"title"},"Tu perfil")),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-128x128"},r.a.createElement("img",{className:"is-rounded",src:this.props.userData.image?this.props.userData.image:"https://bulma.io/images/placeholders/128x128.png",alt:this.props.userData.userFirstname}))),r.a.createElement("div",{className:"media-content"},this.props.userData.userFirstname&&this.props.userData.userSurname?r.a.createElement("div",null,r.a.createElement("p",{className:"title is-4"},this.props.userData.userFirstname," ",this.props.userData.userSurname),r.a.createElement("p",{className:"subtitle is-6"},"@",this.props.userData.username)):r.a.createElement("p",{className:"title is-4"},"@",this.props.userData.username)))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"buttons"},r.a.createElement(b.b,{to:"/profile/".concat(this.props.userData._id),className:"button is-link"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.o,"aria-hidden":"true"}))," ",r.a.createElement("span",null,"Perfil p\xfablico")),r.a.createElement(b.b,{to:"/update",className:"button is-link"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.f,"aria-hidden":"true"}))," ",r.a.createElement("span",null,"Actualiza tu perfil")),r.a.createElement(b.b,{to:"#",className:"button is-danger"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.p,"aria-hidden":"true"}))," ",r.a.createElement("span",null,"Desactiva tu cuenta")))))}}]),t}(n.Component),R=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h3",{className:"title"},"Quiz\xe1 te interese..."),r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-128x128"},r.a.createElement("img",{src:this.props.randomOrg.image?this.props.randomOrg.image:"https://bulma.io/images/placeholders/128x128.png",alt:this.props.randomOrg.orgName}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("h5",{className:"title is-5 txt-is-orange"},this.props.randomOrg.orgName),r.a.createElement("p",null,this.props.randomOrg.orgDescription),r.a.createElement(b.b,{to:"/profile/".concat(this.props.randomOrg._id),className:"button is-primary is-fullwidth has-margin-2"},"Ver campa\xf1as actuales")))))}}]),t}(n.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,Array.isArray(this.props.donations)?this.props.donations.map((function(e,t){return r.a.createElement("li",{key:t,className:"has-margin-1"},"Has donado ",e.amountDonated,"\u20ac a ",r.a.createElement(b.b,{to:e.org?"/profile/".concat(e.org._id):"/campaign/".concat(e.campaign._id)},e.org?e.org.orgName:e.campaign.title))})):null)}}]),t}(n.Component),z=function(e){function t(e){var a,n,r;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).props.userData.userInterests.includes(a.props.id)?(n=!0,r="button is-primary"):(n=!1,r="button is-outlined"),a.state={buttonSelected:n,buttonClass:r},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleButtonClass",value:function(){this.state.buttonSelected?this.setState({buttonSelected:!1,buttonClass:"button is-outlined"}):this.setState({buttonSelected:!0,buttonClass:"button is-primary"}),this.props.toggleInterest(this.props.id)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"column category is-5"},r.a.createElement("div",{className:"align-items-center"},r.a.createElement("figure",{className:"image is-96x96"},r.a.createElement("img",{src:this.props.image,alt:this.props.name}))),r.a.createElement("div",{className:"align-items-center"},r.a.createElement("p",{className:"title is-4"},this.props.name),r.a.createElement("button",{id:this.props.id,className:this.state.buttonClass,onClick:function(){return e.toggleButtonClass()}},r.a.createElement("span",{className:"icon is-medium"},r.a.createElement(v.a,{icon:N.j,"aria-hidden":"true"})))))}}]),t}(n.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.notification?"hide":"notification is-warning"},r.a.createElement("button",{className:"delete",onClick:function(){return e.props.toggleClass()}}),r.a.createElement("p",null,"Te hemos enviado un email para que verifiques tu cuenta. Por favor, comprueba tu correo y haz click en el enlace enviado."))}}]),t}(n.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h2",{className:"title"},"Tu cuenta")),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-128x128"},r.a.createElement("img",{src:this.props.userData.image,alt:this.props.userData.orgName}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-4"},this.props.userData.orgName)))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"buttons"},r.a.createElement(b.b,{to:"/profile/".concat(this.props.userData._id),className:"button is-link"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.o,"aria-hidden":"true"}))," ",r.a.createElement("span",null,"Perfil p\xfablico")),r.a.createElement(b.b,{to:"/update",className:"button is-link"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.f,"aria-hidden":"true"}))," ",r.a.createElement("span",null,"Actualiza tu perfil")),r.a.createElement(b.b,{to:"#",className:"button is-danger"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.p,"aria-hidden":"true"}))," ",r.a.createElement("span",null,"Desactiva tu cuenta"))))))}}]),t}(n.Component);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).deleteCampaign=function(e){a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,{campaigns:a.state.campaigns.filter((function(e){return a.state.campaigns._id!==e}))}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"has-margin-2"},r.a.createElement("h4",{className:"title is-4"},r.a.createElement(b.b,{to:"/campaign/".concat(this.props.campaign._id)},r.a.createElement("span",{className:"icon is-medium"},r.a.createElement(v.a,{icon:N.h,size:"xs","aria-hidden":"true"})),r.a.createElement("span",null,this.props.campaign.title))),r.a.createElement("div",{className:"buttons"},r.a.createElement(b.b,{to:"/campaign/edit/"+this.props.campaign._id,className:"button is-primary"},"Editar campa\xf1a"),r.a.createElement(b.b,{to:"#",className:"button is-primary",onChange:function(){return e.deleteCampaign(e.props.campaign.id)}},"Borrar campa\xf1a")))}}]),t}(n.Component),M=function(){function e(){var t=this;Object(l.a)(this,e),this.addCampaign=function(e,a,n,r,s,c,i){return t.service.post("/add",{title:e,description:a,deadline:n,status:r,fundraisingTarget:s,suggestedDonations:c,organization:i}).then((function(e){return e.data}))},this.getOrgCampaigns=function(e){return t.service.get("/o/".concat(e)).then((function(e){return e.data}))},this.getCampaign=function(e){return t.service.get(e).then((function(e){return e.data}))},this.updateCampaign=function(e,a){return t.service.put("/update/".concat(e),a).then((function(e){return e.data}))},this.URL="https://causa-impacto.herokuapp.com/api/campaign",this.service=f.a.create({baseURL:this.URL,withCredentials:!0})}return Object(o.a)(e,[{key:"handleUpload",value:function(e){return this.service.post("/upload",e).then((function(e){return e.data}))}}]),e}();function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={campaigns:[]},a.campaignService=new M,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getOrgCampaigns(this.props.userData._id)}},{key:"getOrgCampaigns",value:function(e){var t=this;return this.campaignService.getOrgCampaigns(e).then((function(e){t.setState(H({},t.state,{campaigns:e}))})).catch((function(e){t.setState(H({},t.state,{campaigns:!1}))}))}},{key:"render",value:function(){return console.log(this.state.campaigns),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h3",{className:"title"},"Gestionar campa\xf1as"),r.a.createElement(b.b,{to:"/addcampaign",className:"button is-primary is-large has-margin-3"},"Crear nueva campa\xf1a"),r.a.createElement("h3",{className:"title"},"Campa\xf1as activas"),r.a.createElement("ul",null,this.state.campaigns.map((function(e,t){return r.a.createElement(q,{key:t,campaign:e})}))))))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={donors:a.props.donors},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.donors)}},{key:"render",value:function(){for(var e={},t=0;t<this.props.donors.length;t++)e[this.props.donors[t]._id]=this.props.donors[t];var a=[];for(var n in e)a.push(e[n]);return r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h3",{className:"title"},"Donantes"),r.a.createElement("p",null,"Los siguientes usuarios han dado su consentimiento para ser contactados."),r.a.createElement("ul",null,Array.isArray(this.props.donors)?a.map((function(e,t){return r.a.createElement("li",{className:"has-margin-1 donor-list",key:t},r.a.createElement("span",{className:"is-bold"},e.userFirstname," ",e.userSurname)," ",r.a.createElement("a",{href:"mailto:".concat(e.email),className:"button is-primary"},"Email"))})):null))))}}]),t}(n.Component),V=function(){function e(){var t=this;Object(l.a)(this,e),this.getOrg=function(){return t.service.get("/").then((function(e){return e.data}))},this.updateUser=function(e){return t.service.put("/update/".concat(e._id),e).then((function(e){return e.data}))},this.getUser=function(e){return t.service.get("/".concat(e)).then((function(e){return e.data}))},this.getOrgDonationsById=function(){return t.service.get("/o/donations").then((function(e){return e.data}))},this.getCampaignDonationsById=function(){return t.service.get("/c/donations").then((function(e){return e.data}))},this.getCampaignDonationsById=function(){return t.service.get("/c/donations").then((function(e){return e.data}))},this.getOrgByCategory=function(e){return t.service.get("/category/".concat(e)).then((function(e){return e.data}))},this.URL="https://causa-impacto.herokuapp.com/api/user",this.service=f.a.create({baseURL:this.URL,withCredentials:!0})}return Object(o.a)(e,[{key:"handleUpload",value:function(e){return this.service.post("/upload",e).then((function(e){return e.data}))}}]),e}(),G=function(){function e(){Object(l.a)(this,e),this.URL="https://causa-impacto.herokuapp.com/api/donation",this.service=f.a.create({baseURL:this.URL,withCredentials:!0})}return Object(o.a)(e,[{key:"addOrgDonation",value:function(e){var t=e.user,a=e.org;return this.service.post("/o/".concat(t,"/").concat(a),e).then((function(e){return e.data}))}},{key:"addCampaignDonation",value:function(e){var t=e.user,a=e.campaign;return this.service.post("/c/".concat(t,"/").concat(a),e).then((function(e){return e.data}))}},{key:"addComment",value:function(e,t){return this.service.put("/comment/".concat(e),{comment:t}).then((function(e){return e.data}))}},{key:"getDonors",value:function(){return this.service.get("/").then((function(e){return e.data}))}},{key:"getOrgDonations",value:function(e){return this.service.get("/o/".concat(e)).then((function(e){return e.data}))}},{key:"getCampaignDonations",value:function(e){return this.service.get("/c/".concat(e)).then((function(e){return e.data}))}}]),e}();function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).toggleClass=function(){return a.setState({notification:!0})},a.toggleInterest=function(e){var t=a.state.loggedUser.userInterests;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e);var n=W({},a.state.loggedUser,{userInterests:t});a.setState(W({},a.state,{loggedUser:n})),a.updateUser(n)},a.state={loggedUser:a.props.userInSession,notification:null,prueba:"",category:[],index:0,donations:[],donors:[]},a.userService=new V,a.donationService=new G,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getUserDonations(),this.getDonors()}},{key:"getDonors",value:function(){var e=this;return this.donationService.getDonors().then((function(t){var a=t.filter((function(e){return e.contactConsent})).map((function(e){return e.user}));e.setState(W({},e.state,{donors:a}))}))}},{key:"getUserDonations",value:function(){var e=this,t=this.userService.getOrgDonationsById(),a=this.userService.getCampaignDonationsById();return Promise.all([t,a]).then((function(t){var a=[],n=a.concat.apply(a,Object(T.a)(t));n.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),e.setState(W({},e.state,{donations:n}))})).catch((function(e){return console.log(e)}))}},{key:"updateUser",value:function(e){return this.userService.updateUser(e).then().catch()}},{key:"handleCarousel",value:function(e){e?this.state.index>=16?this.setState(W({},this.state,{index:0})):this.setState(W({},this.state,{index:this.state.index+2})):this.state.index<=0?this.setState(W({},this.state,{index:16})):this.setState(W({},this.state,{index:this.state.index-2}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.index,n=t.category;return this.props.userInSession?"donor"===this.state.loggedUser.type&&n[0]?r.a.createElement("div",null,r.a.createElement(A,{toggleClass:this.toggleClass,notification:this.state.notification}),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement(L,{userData:this.state.loggedUser}),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h3",{className:"title"},"Tus donaciones"),r.a.createElement("ul",null,Array.isArray(this.state.donations)?r.a.createElement(F,{donations:this.state.donations}):null)))),r.a.createElement("div",{className:"column"},r.a.createElement(R,{randomOrg:this.props.randomOrg}),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h3",{className:"title"},"\xbfQu\xe9 causas te interesan?"),r.a.createElement("div",{className:"columns categories"},r.a.createElement("div",{className:"column is-1"},r.a.createElement("button",{className:"button is-primary",onClick:function(){return e.handleCarousel(!1)}},r.a.createElement("span",{className:"icon is-large"},r.a.createElement(v.a,{icon:N.c,"aria-hidden":"true",size:"2x"})))),r.a.createElement(z,{key:a,id:n[a]._id,name:n[a].name,image:n[a].image,userData:this.state.loggedUser,toggleInterest:this.toggleInterest}),r.a.createElement(z,{key:a+1,id:n[a+1]._id,name:n[a+1].name,image:n[a+1].image,userData:this.state.loggedUser,toggleInterest:this.toggleInterest}),r.a.createElement("div",{className:"column is-1"},r.a.createElement("button",{className:"button is-primary",onClick:function(){return e.handleCarousel(!0)}},r.a.createElement("span",{className:"icon is-large"},r.a.createElement(v.a,{icon:N.d,"aria-hidden":"true",size:"2x"})))))))))):r.a.createElement("div",null,r.a.createElement(A,{toggleClass:this.toggleClass,notification:this.state.notification}),r.a.createElement("div",{className:"columns"},r.a.createElement(_,{userData:this.state.loggedUser})),r.a.createElement("div",{className:"columns"},Array.isArray(this.state.donors)?r.a.createElement(K,{donors:this.state.donors}):null,r.a.createElement(J,{userData:this.state.loggedUser}))):r.a.createElement("div",null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a;return e.userInSession?(a="active"===e.userInSession.status,t.loggedUser=e.userInSession,t.notification=a,t.category=e.categoryList):null}}]),t}(n.Component);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState($({},a.state,Object(h.a)({},n,r)))},a.state={line1:e.line1,line2:e.line2,city:e.city,stateOrProvince:e.stateOrProvince,postalCode:e.postalCode,country:e.country,openTab:!0,expand:N.a,cardClass:"card-content hide"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleCardClass",value:function(){this.state.openTab?this.setState($({},this.state,{openTab:!1,expand:N.b,cardClass:"card-content"})):this.setState($({},this.state,{openTab:!0,expand:N.a,cardClass:"card-content hide"}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},"Direcci\xf3n"),r.a.createElement(b.b,{to:"#",onClick:function(){return e.toggleCardClass()}},r.a.createElement("span",{className:"icon is-medium has-margin-right-top"},r.a.createElement(v.a,{icon:this.state.expand,"aria-hidden":"true"})))),r.a.createElement("div",{className:this.state.cardClass},r.a.createElement("div",{className:"content"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"L\xednea 1:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"line1",value:this.state.line1,placeholder:"Calle...",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"L\xednea 2:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"line2",value:this.state.line2,placeholder:"Piso/Escalera...",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Ciudad:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"city",placeholder:"Ciudad",value:this.state.city,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Provincia:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"stateOrProvince",placeholder:"Provincia",value:this.state.stateOrProvince,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"C\xf3digo postal:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"postalCode",placeholder:"C\xf3digo Postal",value:this.state.postalCode,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Pa\xeds:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"country",placeholder:"Pa\xeds",value:this.state.country,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("button",{className:"button is-link",onClick:function(){return e.props.handleUpdateSubmit(e.state)},type:"submit"},"Actualizar")))))}}]),t}(n.Component);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(ae({},a.state,Object(h.a)({},n,r)))},a.state={userFirstname:e.firstname,userLastname:e.surname,openTab:!0,expand:N.a,cardClass:"card-content hide"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleCardClass",value:function(){this.state.openTab?this.setState(ae({},this.state,{openTab:!1,expand:N.b,cardClass:"card-content"})):this.setState(ae({},this.state,{openTab:!0,expand:N.a,cardClass:"card-content hide"}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},"Nombre completo"),r.a.createElement(b.b,{to:"#",onClick:function(){return e.toggleCardClass()}},r.a.createElement("span",{className:"icon is-medium has-margin-right-top"},r.a.createElement(v.a,{icon:this.state.expand,"aria-hidden":"true"})))),r.a.createElement("div",{className:this.state.cardClass},r.a.createElement("div",{className:"content"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Nombre:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"userFirstname",type:"text",value:this.state.userFirstname,placeholder:"Nombre",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Apellidos:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"userLastname",type:"text",value:this.state.userLastname,placeholder:"Apellidos",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("button",{className:"button is-link",onClick:function(){return e.props.handleUpdateSubmit(e.state)},type:"submit"},"Actualizar")))))}}]),t}(n.Component);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(se({},a.state,Object(h.a)({},n,r)))},a.state={orgContactPerson:e.contactPerson,orgTelephone:e.telephone,orgEmail:e.email,orgUrl:e.url,openTab:!0,expand:N.a,cardClass:"card-content hide"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleCardClass",value:function(){this.state.openTab?this.setState(se({},this.state,{openTab:!1,expand:N.b,cardClass:"card-content"})):this.setState(se({},this.state,{openTab:!0,expand:N.a,cardClass:"card-content hide"}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},"Datos de contacto"),r.a.createElement(b.b,{to:"#",onClick:function(){return e.toggleCardClass()}},r.a.createElement("span",{className:"icon is-medium has-margin-right-top"},r.a.createElement(v.a,{icon:this.state.expand,"aria-hidden":"true"})))),r.a.createElement("div",{className:this.state.cardClass},r.a.createElement("div",{className:"content"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Persona de contacto:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"orgContactPerson",type:"text",value:this.state.orgContactPerson,placeholder:"Nombre Apellidos",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("span",{className:"help"},r.a.createElement("p",null,"Este campo ",r.a.createElement("span",{className:"txt-is-violet is-bold"},"NO")," ","ser\xe1 visible p\xfablicamente."," ",r.a.createElement("span",{className:"txt-is-orange is-bold"},"causa"),r.a.createElement("span",{className:"txt-is-blue is-bold"},"impacto")," lo utilizar\xe1 solo para verificar datos."))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tel\xe9fono p\xfablico:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"orgTelephone",type:"text",value:this.state.orgTelephone,placeholder:"+34...",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email p\xfablico:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"orgEmail",type:"email",value:this.state.orgEmail,placeholder:"nombre@email.com",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Direcci\xf3n web:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"orgUrl",type:"url",value:this.state.orgUrl,placeholder:"http://www.tusitio.com",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("button",{className:"button is-link",onClick:function(){return e.props.handleUpdateSubmit(e.state)},type:"submit"},"Actualizar")))))}}]),t}(n.Component);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(le({},a.state,Object(h.a)({},n,r)))},a.state={orgName:e.name,orgDescription:e.description,orgRegistrar:e.registrar,orgLicense:e.license,openTab:!0,expand:N.a,cardClass:"card-content hide"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleCardClass",value:function(){this.state.openTab?this.setState(le({},this.state,{openTab:!1,expand:N.b,cardClass:"card-content"})):this.setState(le({},this.state,{openTab:!0,expand:N.a,cardClass:"card-content hide"}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},"Datos de la organizaci\xf3n"),r.a.createElement(b.b,{to:"#",onClick:function(){return e.toggleCardClass()}},r.a.createElement("span",{className:"icon is-medium has-margin-right-top"},r.a.createElement(v.a,{icon:this.state.expand,"aria-hidden":"true"})))),r.a.createElement("div",{className:this.state.cardClass},r.a.createElement("div",{className:"content"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Nombre:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"orgName",value:this.state.orgName,placeholder:"Nombre",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Descripci\xf3n:"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"orgDescription",onChange:function(t){return e.handleChange(t)},value:this.state.orgDescription,placeholder:"Descripci\xf3n breve de la misi\xf3n, los valores y los objetivos de la organizaci\xf3n."}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Lugar de registro:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"orgRegistrar",value:this.state.orgRegistrar,placeholder:"Lugar de registro de la asociaci\xf3n, fundaci\xf3n...",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"N\xfamero de registro:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"orgLicense",value:this.state.orgLicense,placeholder:"N\xfamero de registro",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("button",{className:"button is-link",onClick:function(){return e.props.handleUpdateSubmit(e.state)},type:"submit"},"Actualizar")))))}}]),t}(n.Component);function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var de=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleUpload=function(e){var t=new FormData;t.append("imageUrl",e.target.files[0]),a.userService.handleUpload(t).then((function(e){a.setState(ue({},a.state,{imageUrl:e.secure_url}))})).catch((function(e){console.log("Error while uploading the file: ",e)}))},a.state={openTab:!0,expand:N.a,cardClass:"card-content hide"},a.userService=new V,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleCardClass",value:function(){this.state.openTab?this.setState(ue({},this.state,{openTab:!1,expand:N.b,cardClass:"card-content"})):this.setState(ue({},this.state,{openTab:!0,expand:N.a,cardClass:"card-content hide"}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},this.props.title),r.a.createElement(b.b,{to:"#",onClick:function(){return e.toggleCardClass()}},r.a.createElement("span",{className:"icon is-medium has-margin-right-top"},r.a.createElement(v.a,{icon:this.state.expand,"aria-hidden":"true"})))),r.a.createElement("div",{className:this.state.cardClass},r.a.createElement("form",null,r.a.createElement("div",{className:"file"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",onChange:function(t){return e.handleUpload(t)}}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement(v.a,{icon:N.n,"aria-hidden":"true"})),r.a.createElement("span",{className:"file-label"},"Selecciona un archivo...")))),r.a.createElement("div",{className:this.state.imageUrl?"has-margin-1":"hide"}," ",r.a.createElement("figure",{className:"image is-128x128"},r.a.createElement("img",{src:this.state.imageUrl,alt:"Imagen subida"})),r.a.createElement("p",null,'Si est\xe1s satisfecho con la imagen, pulsa "Actualizar".')),r.a.createElement("button",{className:"button is-link",onClick:function(){return e.props.handleUpdateSubmit(e.state.imageUrl)},type:"submit"},"Actualizar"))))}}]),t}(n.Component);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleAddressSubmit=function(e){var t=he({},a.props.userInSession,{address:he({},e)});a.updateUser(t)},a.handleFullNameSubmit=function(e){var t=he({},a.props.userInSession,{userFirstname:e.userFirstname,userSurname:e.userSurname});a.updateUser(t)},a.handleOrgContactSubmit=function(e){var t=he({},a.props.userInSession,{orgContactPerson:e.orgContactPerson,orgTelephone:e.orgTelephone,orgEmail:e.orgEmail,orgUrl:e.orgUrl});a.updateUser(t)},a.handleOrgDetailsSubmit=function(e){var t=he({},a.props.userInSession,{orgName:e.orgName,orgDescription:e.orgDescription,orgRegistrar:e.orgRegistrar,orgLicense:e.orgLicense});a.updateUser(t)},a.handleImageSubmit=function(e){var t=he({},a.props.userInSession,{image:e});a.updateUser(t)},a.state={},a.userService=new V,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"updateUser",value:function(e){return this.userService.updateUser(e).then().catch()}},{key:"render",value:function(){return this.props.userInSession?"donor"===this.props.userInSession.type?r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title"},"Actualiza tus datos"),r.a.createElement("div",null,r.a.createElement("p",null,"Despliega cada secci\xf3n haciendo click en la esquina superior derecha. Cumplimenta solo aquellos campos que quieras actualizar.")),r.a.createElement(de,{title:"Imagen de perfil",handleUpdateSubmit:this.handleImageSubmit}),r.a.createElement(ne,{firstname:this.props.userInSession.userFirstname,surname:this.props.userInSession.userSurname,handleUpdateSubmit:this.handleFullNameSubmit}),r.a.createElement(ee,{line1:this.props.userInSession.address.line1,line2:this.props.userInSession.address.line2,city:this.props.userInSession.address.city,stateOrProvince:this.props.userInSession.address.stateOrProvince,postalCode:this.props.userInSession.address.postalCode,country:this.props.userInSession.address.country,handleUpdateSubmit:this.handleAddressSubmit}))):r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title"},"Actualiza tus datos"),r.a.createElement("div",null,r.a.createElement("p",null,"Despliega cada secci\xf3n haciendo click en la esquina superior derecha. Cumplimenta solo aquellos campos que quieras actualizar.")),r.a.createElement(de,{title:"Logo de la organizaci\xf3n",handleUpdateSubmit:this.handleImageSubmit}),r.a.createElement(oe,{name:this.props.userInSession.orgName,description:this.props.userInSession.orgDescription,registrar:this.props.userInSession.orgRegistrar,license:this.props.userInSession.orgLicense,handleUpdateSubmit:this.handleOrgDetailsSubmit}),r.a.createElement(ee,{line1:this.props.userInSession.address.line1,line2:this.props.userInSession.address.line2,city:this.props.userInSession.address.city,stateOrProvince:this.props.userInSession.address.stateOrProvince,postalCode:this.props.userInSession.address.postalCode,country:this.props.userInSession.address.country,handleUpdateSubmit:this.handleAddressSubmit}),r.a.createElement(ce,{contactPerson:this.props.userInSession.orgContactPerson,telephone:this.props.userInSession.orgTelephone,email:this.props.userInSession.orgEmail,url:this.props.userInSession.orgUrl,handleUpdateSubmit:this.handleOrgContactSubmit}))):r.a.createElement("h1",null,"Redirecciona a login")}}]),t}(n.Component),fe=a(21),Ee=a.n(fe),be=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card column comments"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-96x96"},this.props.anonymous?r.a.createElement("img",{src:"https://bulma.io/images/placeholders/96x96.png",alt:"An\xf3nimo"}):r.a.createElement("img",{src:this.props.image,alt:this.props.firstname}))),r.a.createElement("div",{className:"media-content"},this.props.anonymous?r.a.createElement("p",{className:"title is-5"},"An\xf3nimo"):r.a.createElement("p",{className:"title is-4"},this.props.firstname," ",this.props.surname),r.a.createElement("p",null,"Ha donado ",this.props.amount,"\u20ac",r.a.createElement("br",null),r.a.createElement("time",null,Ee()(this.props.date).format("DD/MM/YYYY"))))),r.a.createElement("div",{className:"content"},this.props.comment)))}}]),t}(n.Component),ve=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card column is-3"},r.a.createElement("div",{className:"card-content blurb"},r.a.createElement("div",{className:"content"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{className:"blurb-image",src:this.props.image,alt:this.props.title}))),r.a.createElement("div",{className:"content blurb-text-size"},r.a.createElement("p",{className:"title is-4"},this.props.title),r.a.createElement(b.b,{to:"/campaign/".concat(this.props.id),className:"button is-primary is-medium is-fullwidth final"},"Ver campa\xf1a"))))}}]),t}(n.Component);function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).userService=new V,a.donationService=new G,a.campaignService=new M,a.state={profile:{},type:"",user:{},comments:[],campaigns:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getProfileUser(),this.getOrgDonations(),this.getOrgCampaigns()}},{key:"getOrgCampaigns",value:function(){var e=this;return this.campaignService.getOrgCampaigns(this.props.match.params.id).then((function(t){e.setState(Oe({},e.state,{campaigns:t}))})).catch((function(t){e.setState(Oe({},e.state,{campaigns:!1}))}))}},{key:"getOrgDonations",value:function(){var e=this;this.donationService.getOrgDonations(this.props.match.params.id).then((function(t){var a=t.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})).slice(0,4);e.setState(Oe({},e.state,{comments:a}))}))}},{key:"getProfileUser",value:function(){var e=this;this.userService.getUser(this.props.match.params.id).then((function(t){return e.setState(Oe({},e.state,{profile:t}))}))}},{key:"render",value:function(){return this.state.user?"organization"===this.state.type&&"donor"===this.state.profile.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-256x256"},r.a.createElement("img",{className:"fixed-logo-size",src:this.state.profile.image,alt:this.state.profile.username}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("h1",{className:"title is-1"},this.state.profile.userFirstname," ",this.state.profile.userSurname),r.a.createElement("p",null,"Ha donado: ",this.state.profile.userAmountDonated,"\u20ac"))))))):"organization"===this.state.type&&"organization"===this.state.profile.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-256x256"},r.a.createElement("img",{className:"fixed-logo-size",src:this.state.profile.image,alt:this.state.profile.orgName}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("h1",{className:"title is-1"},this.state.profile.orgName),r.a.createElement("h3",{className:"title is-5"},"Sobre nosotros"),this.state.profile.orgDescription,this.state.profile.orgLicense&&this.state.profile.orgRegistrar?r.a.createElement("p",{className:"has-margin-1"},r.a.createElement("span",{className:"is-bold"},"Registro:")," N\xba"," ",this.state.profile.orgLicense," -"," ",this.state.profile.orgRegistrar):null))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"donor"===this.state.type!=="donor"?"column":"hide"}),r.a.createElement("div",{className:"has-margin-2"},r.a.createElement("h3",{className:"title is-5"},"Detalles de contacto"),r.a.createElement("ul",null,this.state.profile.orgUrl?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"is-bold"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.i,"aria-hidden":"true"})))," ",r.a.createElement("a",{href:this.state.profile.orgUrl},this.state.profile.orgUrl)):null,this.state.profile.orgEmail?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.g,"aria-hidden":"true"}))," ",r.a.createElement("a",{href:"mailto:".concat(this.state.profile.orgEmail)},this.state.profile.orgEmail)):null,this.state.profile.orgTelephone?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.l,"aria-hidden":"true"}))," ",this.state.profile.orgTelephone):null))))),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Campa\xf1as activas"),this.state.campaigns.length>0?r.a.createElement("div",{className:"columns campaign-blurb-columns"},this.state.campaigns.map((function(e,t){return r.a.createElement(ve,{key:t,id:e._id,title:e.title,image:e.image})}))):r.a.createElement("p",null,"No hay campa\xf1as actualmente.")),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Comentarios de los usuarios"),this.state.comments.length>0?r.a.createElement("div",{className:"donation-comments"},this.state.comments.map((function(e,t){return r.a.createElement(be,{key:t,anonymous:e.anonymousDonation,comment:e.comment,firstname:e.user.userFirstname,surname:e.user.userSurname,image:e.user.image,amount:e.amountDonated,date:e.created_at})}))):r.a.createElement("p",null,"No hay comentarios."))):"donor"===this.state.type&&"organization"===this.state.profile.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-256x256"},r.a.createElement("img",{className:"fixed-logo-size",src:this.state.profile.image,alt:this.state.profile.orgName}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("h1",{className:"title is-1"},this.state.profile.orgName),r.a.createElement("h3",{className:"title is-5"},"Sobre nosotros"),this.state.profile.orgDescription,this.state.profile.orgLicense&&this.state.profile.orgRegistrar?r.a.createElement("p",{className:"has-margin-1"},r.a.createElement("span",{className:"is-bold"},"Registro:")," N\xba"," ",this.state.profile.orgLicense," -"," ",this.state.profile.orgRegistrar):null))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"donor"===this.state.type!=="donor"?"column":"hide"},r.a.createElement(b.b,{to:"/donate/o/"+this.props.match.params.id,className:"button is-large is-primary is-fullwidth"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.e,"aria-hidden":"true"})),r.a.createElement("span",null,"Donar"))),r.a.createElement("div",{className:"has-margin-2"},r.a.createElement("h3",{className:"title is-5"},"Detalles de contacto"),r.a.createElement("ul",null,this.state.profile.orgUrl?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"is-bold"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.i,"aria-hidden":"true"})))," ",r.a.createElement("a",{href:this.state.profile.orgUrl},this.state.profile.orgUrl)):null,this.state.profile.orgEmail?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.g,"aria-hidden":"true"}))," ",r.a.createElement("a",{href:"mailto:".concat(this.state.profile.orgEmail)},this.state.profile.orgEmail)):null,this.state.profile.orgTelephone?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.l,"aria-hidden":"true"}))," ",this.state.profile.orgTelephone):null))))),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Campa\xf1as activas"),this.state.campaigns.length>0?r.a.createElement("div",{className:"columns campaign-blurb-columns"},this.state.campaigns.map((function(e,t){return r.a.createElement(ve,{key:t,id:e._id,title:e.title,image:e.image})}))):r.a.createElement("p",null,"No hay campa\xf1as actualmente.")),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Comentarios de los usuarios"),this.state.comments.length>0?r.a.createElement("div",{className:"donation-comments"},this.state.comments.map((function(e,t){return r.a.createElement(be,{key:t,anonymous:e.anonymousDonation,comment:e.comment,firstname:e.user.userFirstname,surname:e.user.userSurname,image:e.user.image,amount:e.amountDonated,date:e.created_at})}))):r.a.createElement("p",null,"No hay comentarios."))):"donor"===this.state.type&&"donor"===this.state.profile.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-256x256"},r.a.createElement("img",{className:"fixed-logo-size",src:this.state.profile.image,alt:this.state.profile.username}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("h1",{className:"title is-1"},this.state.profile.userFirstname," ",this.state.profile.userSurname),r.a.createElement("p",null,"Ha donado: ",this.state.profile.userAmountDonated,"\u20ac"))))))):"donor"===this.state.profile.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-256x256"},r.a.createElement("img",{className:"fixed-logo-size",src:this.state.profile.image,alt:this.state.profile.username}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("h1",{className:"title is-1"},this.state.profile.userFirstname," ",this.state.profile.userSurname),r.a.createElement("p",null,"Ha donado: ",this.state.profile.userAmountDonated,"\u20ac"))))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-256x256"},r.a.createElement("img",{className:"fixed-logo-size",src:this.state.profile.image,alt:this.state.profile.orgName}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("h1",{className:"title is-1"},this.state.profile.orgName),r.a.createElement("h3",{className:"title is-5"},"Sobre nosotros"),this.state.profile.orgDescription,this.state.profile.orgLicense&&this.state.profile.orgRegistrar?r.a.createElement("p",{className:"has-margin-1"},r.a.createElement("span",{className:"is-bold"},"Registro:")," N\xba"," ",this.state.profile.orgLicense," -"," ",this.state.profile.orgRegistrar):null))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"donor"===this.state.type!=="donor"?"column":"hide"}),r.a.createElement("div",{className:"has-margin-2"},r.a.createElement("h3",{className:"title is-5"},"Detalles de contacto"),r.a.createElement("ul",null,this.state.profile.orgUrl?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"is-bold"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.i,"aria-hidden":"true"})))," ",r.a.createElement("a",{href:this.state.profile.orgUrl},this.state.profile.orgUrl)):null,this.state.profile.orgEmail?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.g,"aria-hidden":"true"}))," ",r.a.createElement("a",{href:"mailto:".concat(this.state.profile.orgEmail)},this.state.profile.orgEmail)):null,this.state.profile.orgTelephone?r.a.createElement("li",{className:"has-margin-1"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.l,"aria-hidden":"true"}))," ",this.state.profile.orgTelephone):null))))),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Campa\xf1as activas"),this.state.campaigns.length>0?r.a.createElement("div",{className:"campaign-blurb-columns"},this.state.campaigns.map((function(e,t){return r.a.createElement(ve,{key:t,id:e._id,title:e.title,image:e.image})}))):r.a.createElement("p",null,"No hay campa\xf1as actualmente.")),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Comentarios de los usuarios"),this.state.comments.length>0?r.a.createElement("div",{className:"donation-comments"},this.state.comments.map((function(e,t){return r.a.createElement(be,{key:t,anonymous:e.anonymousDonation,comment:e.comment,firstname:e.user.userFirstname,surname:e.user.userSurname,image:e.user.image,amount:e.amountDonated,date:e.created_at})}))):r.a.createElement("p",null,"No hay comentarios."))):r.a.createElement("div",null,"Ves el perfil pero te pide que te loguees para donar si es un perfil de org")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.userInSession?(t.user=e.userInSession,t.type=e.userInSession.type):null}}]),t}(n.Component),je=a(40),Ce=a.n(je),Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={showButton:!1},window.React=r.a,window.ReactDOM=c.a,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isScriptLoaded,a=e.isScriptLoadSucceed;t&&a&&this.setState({showButton:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.isScriptLoaded,a=e.isScriptLoadSucceed;!this.state.showButton&&!this.props.isScriptLoaded&&t&&a&&this.setState({showButton:!0})}},{key:"render",value:function(){var e=window.PAYPAL,t=this.props,a=t.total,n=t.currency,s=t.env,c=t.commit,i=t.client,l=t.onSuccess,o=t.onError,m=t.onCancel,u=this.state.showButton;return r.a.createElement("div",null,u&&r.a.createElement(e.Button.react,{env:s,client:i,commit:c,payment:function(){return e.rest.payment.create(s,i,{transactions:[{amount:{total:a,currency:n}}]})},onAuthorize:function(e,t){return t.payment.execute().then((function(){var t={paid:!0,cancelled:!1,payerID:e.payerID,paymentID:e.paymentID,paymentToken:e.paymentToken,returnUrl:e.returnUrl};l(t)}))},onCancel:m,onError:o}))}}]),t}(r.a.Component),we=Ce()("https://www.paypalobjects.com/api/checkout.js")(Se);function De(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?De(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):De(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ke={sandbox:"AcZBNh4ILpTrN4lrRpqJ9Sxk62A-3wbAmAbkY6HJfH7FUSN9mtBSBO_KVlU5TIEldbCKoNdXKSGFE-t5"},xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Pe({},a.state,Object(h.a)({},n,r)))},a.handleCheckboxChange=function(e){var t=e.target,n=t.name,r=t.checked;a.setState(Pe({},a.state,Object(h.a)({},n,r)))},a.state={donation:10,anonymous:!1,contact:!0},a.service=new G,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Cantidad:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"donation",className:"input is-large",type:"number",placeholder:"Text input",value:this.state.donation,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:"anonymous",checked:this.state.anonymous,onChange:function(t){return e.handleCheckboxChange(t)}}),r.a.createElement("span",null,"Donar de forma an\xf3nima."))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:"contact",checked:this.state.contact,onChange:function(t){return e.handleCheckboxChange(t)}}),r.a.createElement("span",null,"Quiero que la organizaci\xf3n me pueda contactar."))),r.a.createElement(we,{client:ke,env:"sandbox",commit:!0,currency:"EUR",total:this.state.donation,onSuccess:function(t){var a={user:e.props.userInSession._id,org:e.props.match.params.id,anonymous:e.state.anonymous,donation:e.state.donation,contact:e.state.contact};e.service.addOrgDonation(a).then((function(t){e.props.history.push("/donate/success/".concat(t._id))})).then((function(e){return console.log(e)})),console.log("Successful payment!",t)},onError:function(e){return console.log("Erroneous payment OR failed to load script!",e)},onCancel:function(e){return console.log("Cancelled payment!",e)}})))}}]),t}(n.Component),Ue=Object(p.f)(xe);function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Le={sandbox:"AcZBNh4ILpTrN4lrRpqJ9Sxk62A-3wbAmAbkY6HJfH7FUSN9mtBSBO_KVlU5TIEldbCKoNdXKSGFE-t5"},Re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Te({},a.state,Object(h.a)({},n,r)))},a.handleCheckboxChange=function(e){var t=e.target,n=t.name,r=t.checked;a.setState(Te({},a.state,Object(h.a)({},n,r)))},a.state={donation:10,anonymous:!1,contact:!0},a.service=new G,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Cantidad:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"donation",className:"input is-large",type:"number",placeholder:"Text input",value:this.state.donation,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:"anonymous",checked:this.state.anonymous,onChange:function(t){return e.handleCheckboxChange(t)}}),r.a.createElement("span",null,"Donar de forma an\xf3nima."))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:"contact",checked:this.state.contact,onChange:function(t){return e.handleCheckboxChange(t)}}),r.a.createElement("span",null,"Quiero que la organizaci\xf3n me pueda contactar."))),r.a.createElement(we,{client:Le,env:"sandbox",commit:!0,currency:"EUR",total:this.state.donation,onSuccess:function(t){var a={user:e.props.userInSession._id,campaign:e.props.match.params.id,anonymous:e.state.anonymous,donation:e.state.donation,contact:e.state.contact};e.service.addCampaignDonation(a).then((function(t){e.props.history.push("/donate/success/".concat(t._id))})).then((function(e){return console.log(e)})),console.log("Successful payment!",t)},onError:function(e){return console.log("Erroneous payment OR failed to load script!",e)},onCancel:function(e){return console.log("Cancelled payment!",e)}})))}}]),t}(n.Component),Fe=Object(p.f)(Re);function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Ae({},a.state,Object(h.a)({},n,r)))},a.handleCampaignDetailsSubmit=function(){var e={title:a.state.title,description:a.state.description,fundraisingTarget:a.state.fundraisingTarget,status:a.state.status,deadline:a.state.deadline,suggestedDonation:a.state.suggestedDonation};a.campaignService.updateCampaign(a.props.id,e)},a.state={title:"",description:"",deadline:"",status:"",fundraisingTarget:0,suggestedDonation:0,openTab:!0,expand:N.a,cardClass:"card-content hide"},a.campaignService=new M,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.campaignService.getCampaign(this.props.id).then((function(t){e.setState(Ae({},e.state,{title:t.title,description:t.description,deadline:Ee()(t.deadline).format("YYYY-MM-DD"),status:t.status,fundraisingTarget:t.fundraisingTarget,suggestedDonation:t.suggestedDonation}))}))}},{key:"toggleCardClass",value:function(){this.state.openTab?this.setState(Ae({},this.state,{openTab:!1,expand:N.b,cardClass:"card-content"})):this.setState(Ae({},this.state,{openTab:!0,expand:N.a,cardClass:"card-content hide"}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},"Datos de la campa\xf1a"),r.a.createElement(b.b,{to:"#",onClick:function(){return e.toggleCardClass()}},r.a.createElement("span",{className:"icon is-medium has-margin-right-top"},r.a.createElement(v.a,{icon:this.state.expand,"aria-hidden":"true"})))),r.a.createElement("div",{className:this.state.cardClass},r.a.createElement("div",{className:"content"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"T\xedtulo:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"title",value:this.state.title,placeholder:"T\xedtulo",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Descripci\xf3n:"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"description",onChange:function(t){return e.handleChange(t)},value:this.state.description,placeholder:"Descripci\xf3n de la campa\xf1a."}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Fecha l\xedmite:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"date",name:"deadline",value:this.state.deadline,placeholder:"",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Estado:"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"select is-normal",name:"status",value:this.state.status,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:"active"},"Activa"),r.a.createElement("option",{value:"inactive"},"Desactivada"))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Objetivo de recaudaci\xf3n:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"fundraisingTarget",value:this.state.fundraisingTarget,placeholder:"Cantidad en EUR",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Donaci\xf3n sugerida:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"suggestedDonation",value:this.state.suggestedDonation,placeholder:"Cantidad en EUR",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("button",{className:"button is-link",onClick:function(){return e.handleCampaignDetailsSubmit()},type:"submit"},"Actualizar")))))}}]),t}(n.Component);function Be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleUpload=function(e){var t=new FormData;t.append("imageUrl",e.target.files[0]),a.campaignService.handleUpload(t).then((function(e){a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Be(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,{imageUrl:e.secure_url}))})).catch((function(e){console.log("Error while uploading the file: ",e)}))},a.state={openTab:!0,expand:N.a,cardClass:"card-content hide"},a.campaignService=new M,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleCardClass",value:function(){this.state.openTab?this.setState({openTab:!1,expand:N.b,cardClass:"card-content"}):this.setState({openTab:!0,expand:N.a,cardClass:"card-content hide"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card has-margin-2"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},this.props.title),r.a.createElement(b.b,{to:"#",onClick:function(){return e.toggleCardClass()}},r.a.createElement("span",{className:"icon is-medium has-margin-right-top"},r.a.createElement(v.a,{icon:this.state.expand,"aria-hidden":"true"})))),r.a.createElement("div",{className:this.state.cardClass},r.a.createElement("form",null,r.a.createElement("div",{className:"file"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",onChange:function(t){return e.handleUpload(t)}}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement(v.a,{icon:N.n,"aria-hidden":"true"})),r.a.createElement("span",{className:"file-label"},"Selecciona un archivo...")))),r.a.createElement("div",{className:this.state.imageUrl?"has-margin-1":"hide"}," ",r.a.createElement("figure",{className:"image is-128x128"},r.a.createElement("img",{src:this.state.imageUrl,alt:"Imagen subida"})),r.a.createElement("p",null,'Si est\xe1s satisfecho con la imagen, pulsa "Actualizar".')),r.a.createElement("button",{className:"button is-link",onClick:function(){return e.props.handleUpdateSubmit(e.state.imageUrl)},type:"submit"},"Actualizar"))))}}]),t}(n.Component);function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var He=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleImageSubmit=function(e){var t=Ye({},a.state.campaign,{image:e});console.log(),a.campaignService.updateCampaign(a.props.match.params.id,t)},a.state={},a.campaignService=new M,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id),this.campaignService.getCampaign(this.props.match.params.id).then((function(t){e.setState(Ye({},e.state,{campaign:t}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title"},"Actualiza tus datos"),r.a.createElement("div",null,r.a.createElement("p",null,"Despliega cada secci\xf3n haciendo click en la esquina superior derecha. Cumplimenta solo aquellos campos que quieras actualizar.")),r.a.createElement(qe,{title:"Imagen de campa\xf1a",handleUpdateSubmit:this.handleImageSubmit}),r.a.createElement(_e,{id:this.props.match.params.id}))))}}]),t}(n.Component);function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,Object(h.a)({},n,r)))},a.handleSubmit=function(e){a.service.addComment(a.props.match.params.id,e),a.props.history.push("/home")},a.state={comment:""},a.service=new G,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",{className:"title"},"\xa1Gracias por tu donaci\xf3n, ",this.props.userInSession.userFirstname,"!"),r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"\xbfTe gustar\xeda a\xf1adir un comentario a tu donaci\xf3n?"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"comment",onChange:function(t){return e.handleChange(t)},value:this.state.comment,placeholder:"Tu comentario (opcional)."}))),r.a.createElement("button",{type:"submit",onClick:function(){return e.handleSubmit(e.state.comment)},className:"button is-link"},"Enviar")))}}]),t}(n.Component),Ve=Object(p.f)(Ke);function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var We=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).userService=new V,a.donationService=new G,a.campaignService=new M,a.state={campaign:{},type:"",user:{},comments:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getCampaign(),this.getCampaignDonations()}},{key:"getCampaign",value:function(){var e=this;this.campaignService.getCampaign(this.props.match.params.id).then((function(t){return e.setState(Qe({},e.state,{campaign:t}))}))}},{key:"getCampaignDonations",value:function(){var e=this;console.log("se ha llamado getCampaignDonations()"),this.donationService.getCampaignDonations(this.props.match.params.id).then((function(t){var a=t.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})).slice(0,4);e.setState(Qe({},e.state,{comments:a}))}))}},{key:"render",value:function(){return 0===Object.entries(this.state.user).length&&this.state.user.constructor===Object?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title is-2"},this.state.campaign.title),r.a.createElement("img",{className:"campaign-main-img",src:this.state.campaign.image,alt:this.state.campaign.title})),r.a.createElement("div",{className:"column"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{className:"title is-5"},"Objetivo de recaudaci\xf3n:")," ",r.a.createElement("span",{className:"title is-5 txt-is-orange"},this.state.campaign.fundraisingTarget,"\u20ac")),r.a.createElement("li",null,r.a.createElement("span",{className:"title is-5"},"Recaudaci\xf3n actual:")," ",r.a.createElement("span",{className:"title is-5 txt-is-blue"},this.state.campaign.totalDonations,"\u20ac"))),r.a.createElement("h3",{className:"title is-5 has-margin-2"},"Descripici\xf3n de la campa\xf1a:"),this.state.campaign.description,r.a.createElement(b.b,{to:"/signup",className:"button is-large is-primary is-fullwidth has-margin-2"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.o,"aria-hidden":"true"})),r.a.createElement("span",null,"Reg\xedstrate para donar")))))),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Comentarios de los usuarios"),this.state.comments.length>0?r.a.createElement("div",{className:"donation-comments"},this.state.comments.map((function(e,t){return r.a.createElement(be,{key:t,anonymous:e.anonymousDonation,comment:e.comment,firstname:e.user.userFirstname,surname:e.user.userSurname,image:e.user.image,amount:e.amountDonated,date:e.created_at})}))):r.a.createElement("p",null,"No hay comentarios."))):"organization"===this.state.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title is-2"},this.state.campaign.title),r.a.createElement("img",{className:"campaign-main-img",src:this.state.campaign.image,alt:this.state.campaign.title})),r.a.createElement("div",{className:"column"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{className:"title is-5"},"Objetivo de recaudaci\xf3n:")," ",r.a.createElement("span",{className:"title is-5 txt-is-orange"},this.state.campaign.fundraisingTarget,"\u20ac")),r.a.createElement("li",null,r.a.createElement("span",{className:"title is-5"},"Recaudaci\xf3n actual:")," ",r.a.createElement("span",{className:"title is-5 txt-is-blue"},this.state.campaign.totalDonations,"\u20ac"))),r.a.createElement("h3",{className:"title is-5 has-margin-2"},"Descripici\xf3n de la campa\xf1a:"),this.state.campaign.description)))),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Comentarios de los usuarios"),this.state.comments.length>0?r.a.createElement("div",{className:"donation-comments"},this.state.comments.map((function(e,t){return r.a.createElement(be,{key:t,anonymous:e.anonymousDonation,comment:e.comment,firstname:e.user.userFirstname,surname:e.user.userSurname,image:e.user.image,amount:e.amountDonated,date:e.created_at})}))):r.a.createElement("p",null,"No hay comentarios."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media-content columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title is-2"},this.state.campaign.title),r.a.createElement("img",{className:"campaign-main-img",src:this.state.campaign.image,alt:this.state.campaign.title})),r.a.createElement("div",{className:"column"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{className:"title is-5"},"Objetivo de recaudaci\xf3n:")," ",r.a.createElement("span",{className:"title is-5 txt-is-orange"},this.state.campaign.fundraisingTarget,"\u20ac")),r.a.createElement("li",null,r.a.createElement("span",{className:"title is-5"},"Recaudaci\xf3n actual:")," ",r.a.createElement("span",{className:"title is-5 txt-is-blue"},this.state.campaign.totalDonations,"\u20ac"))),r.a.createElement("h3",{className:"title is-5 has-margin-2"},"Descripici\xf3n de la campa\xf1a:"),this.state.campaign.description,r.a.createElement(b.b,{to:"/donate/c/".concat(this.props.match.params.id),className:"button is-large is-primary is-fullwidth has-margin-2"},r.a.createElement("span",{className:"icon is-medium","aria-hidden":"true"},r.a.createElement(v.a,{icon:N.e,"aria-hidden":"true"})),r.a.createElement("span",null,"Donar")))))),r.a.createElement("div",{className:"has-margin-5"},r.a.createElement("h3",{className:"title"},"Comentarios de los usuarios"),this.state.comments.length>0?r.a.createElement("div",{className:"donation-comments"},this.state.comments.map((function(e,t){return r.a.createElement(be,{key:t,anonymous:e.anonymousDonation,comment:e.comment,firstname:e.user.userFirstname,surname:e.user.userSurname,image:e.user.image,amount:e.amountDonated,date:e.created_at})}))):r.a.createElement("p",null,"No hay comentarios.")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.userInSession?(t.user=e.userInSession,t.type=e.userInSession.type):null}}]),t}(n.Component);function Xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xe(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){a.service.getSearchResults(e).then((function(e){a.setState(Ze({},a.state,{results:e}))})).catch((function(e){a.setState(Ze({},a.state,{results:!1}))}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Ze({},a.state,Object(h.a)({},n,r)),(function(){return a.handleSubmit(a.state.searchTerm)}))},a.state={searchTerm:"",results:[]},a.service=new O,a.categoryService=new y,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.results),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"align-items-center"},r.a.createElement("div",{className:"align-items-center main-text"},r.a.createElement("img",{src:"./images/logo.png",alt:"logo"}),r.a.createElement("p",{className:"has-margin-3"},r.a.createElement("h3",{className:"title is-3"},"\xbfAlguna vez has querido ayudar a otros pero no sab\xedas c\xf3mo?")," ",r.a.createElement("span",{className:"txt-is-orange is-bold"},"causa"),r.a.createElement("span",{className:"txt-is-blue is-bold"},"impacto")," pretende conectar a personas como t\xfa con organizaciones que ayudan a individuos en situaciones dif\xedciles o de emergencia, para que dispongan del personal y material necesario para actuar."),r.a.createElement("p",null,"Comienza a buscar organizaciones y campa\xf1as de tu inter\xe9s:")),r.a.createElement("div",{className:"main-search"},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"dropdown is-active"},r.a.createElement("div",{className:"dropdown-trigger"},r.a.createElement("input",{className:"input search-input",type:"text",value:this.state.searchTerm,placeholder:"Busca una organizaci\xf3n o campa\xf1a",name:"searchTerm",onChange:function(t){return e.handleChange(t)}})),this.state.results.length>0&&r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu"},r.a.createElement("div",{className:"dropdown-content d-main"},this.state.results.map((function(e,t){return r.a.createElement(b.b,{to:e.uri,className:"dropdown-item"},e.title)})))))),r.a.createElement("div",{className:"control"},r.a.createElement(b.b,{to:"#",className:"button is-info"},r.a.createElement("span",{className:"icon is-medium"},r.a.createElement(v.a,{icon:N.m,"aria-hidden":"true"})))))),r.a.createElement("div",{className:"main-category has-margin-4 categories"},r.a.createElement("h3",{className:"title is-4"},"Busca por categor\xeda"),r.a.createElement("div",{className:"categories"},this.props.categoryList.map((function(e,t){return r.a.createElement("div",{className:"category-main column is-one-fifth",key:t},r.a.createElement(b.b,{to:"/category/".concat(e._id)},r.a.createElement("img",{src:e.image,className:"category-img has-margin-1",alt:e.name})," ",r.a.createElement("h5",{className:"title is-6"},e.name)))}))))))}}]),t}(n.Component);function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var at=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={category:"",organizations:[]},a.service=new V,a.categoryService=new y,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getOrgByCategory(),this.getCategoryById()}},{key:"getOrgByCategory",value:function(){var e=this;return this.service.getOrgByCategory(this.props.match.params.id).then((function(t){e.setState(tt({},e.state,{organizations:t}))}))}},{key:"getCategoryById",value:function(){var e=this;return console.log(this.props.match.params.id),this.categoryService.getCategoryById(this.props.match.params.id).then((function(t){console.log(t),e.setState(tt({},e.state,{category:t.name}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",{className:"title"},"Organizaciones en ",r.a.createElement("span",{className:"txt-is-orange"},this.state.category)),r.a.createElement("ul",null,this.state.organizations.map((function(e,t){return r.a.createElement("li",{className:"has-margin-2",key:t},r.a.createElement(b.b,{to:"/profile/".concat(e.orgName),alt:e.orgName},e.orgName))}))))}}]),t}(n.Component);function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var rt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.title,r=t.description,s=t.deadline,c=t.status,i=t.fundraisingTarget,l=t.suggestedDonations,o=a.props.userInSession._id;return a.service.addCampaign(n,r,s,c,i,l,o).then((function(e){a.setState({title:"",description:"",deadline:1996,status:"",fundraisingTarget:0,suggestedDonations:0}),console.log(e);var t=[].concat(Object(T.a)(a.props.userInSession.orgCampaigns),[e._id]),n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.props.userInSession,{orgCampaigns:t});a.userService.updateUser(n),a.props.history.push("/home")})).catch((function(e){a.setState({title:n,description:r,deadline:s,status:c,fundraisingTarget:i,suggestedDonations:l,error:!0})}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(h.a)({},n,r))},a.state={title:"",description:"",deadline:void 0,status:"active",fundraisingTarget:0,suggestedDonations:0},a.service=new M,a.userService=new V,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"Datos de la campa\xf1a"),r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"T\xedtulo:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"title",value:this.state.title,placeholder:"T\xedtulo",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Descripci\xf3n:"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"description",onChange:function(t){return e.handleChange(t)},value:this.state.description,placeholder:"Descripci\xf3n de la campa\xf1a."}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Fecha l\xedmite:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"date",name:"deadline",value:this.state.deadline,placeholder:"",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Estado:"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"select is-normal",name:"status",value:this.state.status,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:"active"},"Activa"),r.a.createElement("option",{value:"inactive"},"Desactivada"))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Objetivo de recaudaci\xf3n:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"fundraisingTarget",value:this.state.fundraisingTarget,placeholder:"Cantidad en EUR",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Donaci\xf3n sugerida:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"suggestedDonation",value:this.state.suggestedDonation,placeholder:"Cantidad en EUR",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("button",{className:"button is-link",onClick:function(t){return e.handleFormSubmit(t)},type:"submit"},"A\xf1adir campa\xf1a")))}}]),t}(n.Component),st=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){a.authService.logout().then((function(){a.setState({loggedInUser:null}),a.props.history.push("/")}))},a.state={loggedInUser:null,confimationCode:"",categories:[],randomOrg:{}},a.authService=new E,a.categoryService=new y,a.userService=new V,a.fetchUser(),a.getCategories(),a.getRandomOrg(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getCategories",value:function(){var e=this;return this.categoryService.getCategories().then((function(t){e.setState({categories:t})})).catch((function(t){e.setState({categories:!1})}))}},{key:"getRandomOrg",value:function(){var e=this;return this.userService.getOrg().then((function(t){var a=t[Math.floor(Math.random()*t.length)];e.setState({randomOrg:a})})).catch((function(t){e.setState({randomOrg:!1})}))}},{key:"fetchUser",value:function(){var e=this;return this.authService.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(D,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/navbar",render:function(t){return r.a.createElement(D,{userInSession:e.state.loggedInUser,logout:e.logout})}}),r.a.createElement(p.a,{exact:!0,path:"/",render:function(t){return r.a.createElement($e,{userInSession:e.state.loggedInUser,categoryList:e.state.categories})}}),r.a.createElement(p.a,{exact:!0,path:"/category/:id",render:function(t){return r.a.createElement(at,Object.assign({},t,{userInSession:e.state.loggedInUser}))}}),r.a.createElement(p.a,{exact:!0,path:"/home",render:function(t){return r.a.createElement(X,{userInSession:e.state.loggedInUser,categoryList:e.state.categories,randomOrg:e.state.randomOrg})}}),r.a.createElement(p.a,{exact:!0,path:"/profile/:id",render:function(t){return r.a.createElement(ye,Object.assign({},t,{userInSession:e.state.loggedInUser}))}}),r.a.createElement(p.a,{exact:!0,path:"/update",render:function(){return r.a.createElement(ge,{userInSession:e.state.loggedInUser})}}),r.a.createElement(p.a,{exact:!0,path:"/addcampaign",render:function(t){return r.a.createElement(rt,Object.assign({},t,{userInSession:e.state.loggedInUser}))}}),r.a.createElement(p.a,{exact:!0,path:"/campaign/edit/:id",render:function(t){var a=t.match;return r.a.createElement(He,{userInSession:e.state.loggedInUser,match:a})}}),r.a.createElement(p.a,{exact:!0,path:"/campaign/:id",render:function(t){return r.a.createElement(We,Object.assign({},t,{userInSession:e.state.loggedInUser}))}}),r.a.createElement(p.a,{exact:!0,path:"/donate/o/:id",render:function(t){var a=t.match;return r.a.createElement(Ue,{userInSession:e.state.loggedInUser,match:a})}}),r.a.createElement(p.a,{exact:!0,path:"/donate/c/:id",render:function(t){var a=t.match;return r.a.createElement(Fe,{userInSession:e.state.loggedInUser,match:a})}}),r.a.createElement(p.a,{exact:!0,path:"/donate/success/:id",render:function(t){var a=t.match;return r.a.createElement(Ve,{userInSession:e.state.loggedInUser,match:a})}})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(D,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",render:function(t){return r.a.createElement($e,{userInSession:e.state.loggedInUser,categoryList:e.state.categories})}}),r.a.createElement(p.a,{exact:!0,path:"/category/:id",render:function(t){var a=Object(i.a)({},t);return r.a.createElement(at,Object.assign({},a,{userInSession:e.state.loggedInUser}))}}),r.a.createElement(p.a,{exact:!0,path:"/"}),r.a.createElement(p.a,{exact:!0,path:"/home",render:function(t){return r.a.createElement(X,{userInSession:e.state.loggedInUser,categoryList:e.state.categories,randomOrg:e.state.randomOrg})}}),r.a.createElement(p.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(x,{getUser:e.getUser})}}),r.a.createElement(p.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(I,{getUser:e.getUser})}}),r.a.createElement(p.a,{exact:!0,path:"/profile/:id",render:function(t){var a=t.match;return r.a.createElement(ye,{userInSession:e.state.loggedInUser,match:a})}}),r.a.createElement(p.a,{exact:!0,path:"/campaign/:id",render:function(t){var a=t.match;return r.a.createElement(We,{userInSession:e.state.loggedInUser,match:a})}}))))}}]),t}(n.Component),ct=Object(p.f)(st);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(71),a(72),a(73);c.a.render(r.a.createElement(b.a,null,r.a.createElement(ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.07c24012.chunk.js.map